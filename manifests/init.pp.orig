#
# Class: osg-wn-client
#

class osg-wn-client {

	package { yum-priorities:	name => "yum-priorities",	ensure => installed, }

	package { osg-wn-client:
	        name => "osg-wn-client",
		ensure => installed,
		require => Package["yum-priorities"],
	}

	package { glexec:
		name => "glexec.x86_64",
		ensure => installed,
		require => Package["yum-priorities"],
	}

	package { lcmaps:
		name => "lcmaps.x86_64",
		ensure => latest,
		require => Package["yum-priorities"],
	}

	package { "lcmaps-plugins-process-tracking.x86_64":
		ensure => latest,
		require => Package["yum-priorities"],
	}

	package { "lcmaps-plugins-mount-under-scratch.x86_64":
		ensure => latest,
		require => Package["yum-priorities"],
	}

	file { "glexec.conf":
		path    => "/etc/glexec.conf",
		owner   => "root", group => "glexec", mode => 640,
		ensure  => present,
		require => Package["glexec"],
		content => template("osg-wn-client/glexec.conf.erb"),
	}

	file { "lcmaps.db":
		path    => "/etc/lcmaps.db",
		owner   => "root", group => "root", mode => 644,
		require => [Package["lcmaps"],
			    Package["lcmaps-plugins-mount-under-scratch.x86_64"],
			    Package["lcmaps-plugins-process-tracking.x86_64"]],
		content => template("osg-wn-client/lcmaps.db.erb"),
	}

}

